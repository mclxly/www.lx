!function(){function t(t,e){return t?"string"==typeof t?(e||document).querySelector(t):t:null}function e(t,e){return Array.prototype.slice.call((e||document).querySelectorAll(t))}function i(t){return t.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")}t.create=function(e,i){var n,s=document.createElement(e);for(n in i){var r=i[n];"inside"==n?t(r).appendChild(s):"around"==n?(r=t(r),r.parentNode.insertBefore(s,r),s.appendChild(r)):n in s?s[n]=r:s.setAttribute(n,r)}return s},t.bind=function(t,e){if(t)for(var i in e){var n=e[i];i.split(/\s+/).forEach(function(e){t.addEventListener(e,n)})}},t.fire=function(t,e,i){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0);for(var s in i)n[s]=i[s];t.dispatchEvent(n)};var n=self.Awesomplete=function(e,s){var r=this;s=s||{},this.input=e,e.setAttribute("aria-autocomplete","list"),this.minChars=+e.getAttribute("data-minchars")||s.minChars||2,this.maxItems=+e.getAttribute("data-maxitems")||s.maxItems||10,this.list=e.getAttribute("data-list")||s.list||[],this.filter=s.filter||n.FILTER_CONTAINS,this.sort=s.sort||n.SORT_BYLENGTH,this.autoFirst=e.hasAttribute("data-autofirst")||s.autoFirst||!1,this.item=s.item||function(e,n){return t.create("li",{innerHTML:e.replace(RegExp(i(n.trim()),"gi"),"<mark>$&</mark>"),"aria-selected":"false"})},this.index=-1,this.container=t.create("div",{className:"awesomplete",around:e}),this.ul=t.create("ul",{hidden:"",inside:this.container}),t.bind(this.input,{input:function(){r.evaluate()},blur:function(){r.close()},keydown:function(t){var e=t.keyCode;13==e&&-1<r.index?(t.preventDefault(),r.select()):27==e?r.close():(38==e||40==e)&&(t.preventDefault(),r[38==e?"previous":"next"]())}}),t.bind(this.input.form,{submit:function(){r.close()}}),t.bind(this.ul,{mousedown:function(t){if(t=t.target,t!=this){for(;t&&!/li/i.test(t.nodeName);)t=t.parentNode;t&&r.select(t)}}})};n.prototype={set list(e){Array.isArray(e)?this._list=e:"string"==typeof e&&-1<e.indexOf(",")?this._list=e.split(/\s*,\s*/):(e=t(e))&&e.children&&(this._list=[].slice.apply(e.children).map(function(t){return t.innerHTML.trim()}))},close:function(){this.ul.setAttribute("hidden",""),this.index=-1,t.fire(this.input,"awesomplete-close")},open:function(){this.ul.removeAttribute("hidden"),this.autoFirst&&-1==this.index&&this["goto"](0),t.fire(this.input,"awesomplete-open")},next:function(){this["goto"](this.index<this.ul.children.length-1?this.index+1:-1)},previous:function(){var t=this.ul.children.length;this["goto"](-1<this.index?this.index-1:t-1)},"goto":function(t){var e=this.ul.children;-1<this.index&&e[this.index].setAttribute("aria-selected","false"),this.index=t,t>-1&&0<e.length&&e[t].setAttribute("aria-selected","true")},select:function(e){if(e=e||this.ul.children[this.index]){var i;t.fire(this.input,"awesomplete-select",{text:e.textContent,preventDefault:function(){i=!0}}),i||(this.input.value=e.textContent,this.close(),t.fire(this.input,"awesomplete-selectcomplete"))}},evaluate:function(){var t=this,e=this.input.value;e.length>=this.minChars&&0<this._list.length?(this.index=-1,this.ul.innerHTML="",this._list.filter(function(i){return t.filter(i,e)}).sort(this.sort).every(function(i,n){return t.ul.appendChild(t.item(i,e)),n<t.maxItems-1}),this.open()):this.close()}},n.FILTER_CONTAINS=function(t,e){return RegExp(i(e.trim()),"i").test(t)},n.FILTER_STARTSWITH=function(t,e){return RegExp("^"+i(e.trim()),"i").test(t)},n.SORT_BYLENGTH=function(t,e){return t.length!=e.length?t.length-e.length:e>t?-1:1},e("input.awesomplete").forEach(function(t){new Awesomplete(t)}),n.$=t,n.$$=e}();